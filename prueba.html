<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>NextSkill ‚Äî Diario Contable PRO</title>
<style>
:root{
  --bg:#0b1330; --panel:#101b45; --ink:#eaf0ff; --muted:#b9c5ee;
  --accent:#4aa3ff; --accent2:#2a4dfb; --good:#34D399; --bad:#F87171; --warn:#FCD34D;
}
*{box-sizing:border-box}
body{margin:0;background:var(--bg);color:var(--ink);font-family:'Inter',system-ui,Segoe UI,Roboto,sans-serif;}
h1{text-align:center;margin-top:20px;color:var(--accent)}
h2{text-align:center;margin-top:10px;color:var(--muted)}
.container{max-width:1000px;margin:20px auto;padding:20px;background:var(--panel);border-radius:16px;border:1px solid rgba(255,255,255,.1);}
.cuentas{display:flex;flex-wrap:wrap;gap:10px;justify-content:center;margin:20px 0}
.cuenta{background:var(--accent2);color:#fff;padding:10px 14px;border-radius:10px;cursor:grab;user-select:none;transition:.2s}
.cuenta:hover{transform:scale(1.05);background:#3b5bf5}
.tabla{max-width:700px;margin:20px auto;border-collapse:collapse;width:100%;color:#fff}
.tabla th,.tabla td{border:1px solid rgba(255,255,255,.15);padding:8px;text-align:center}
.tabla th{background:#1a2b64}
.btn{display:block;margin:20px auto;background:var(--accent);color:#fff;padding:10px 18px;border:none;border-radius:10px;font-weight:700;cursor:pointer;}
#msg{text-align:center;margin-top:8px;font-weight:600;}
#panelProgreso{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:20px;}
.box{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.1);padding:12px;border-radius:10px;text-align:center}
.box h3{margin:0;font-size:16px;color:var(--muted)}
.box p{font-weight:800;font-size:18px;margin:4px 0}
footer{text-align:center;color:var(--muted);margin:30px 0}
.correcto{color:var(--good)} .incorrecto{color:var(--bad)}
</style>
</head>
<body>

<h1>üìò Diario Contable PRO</h1>
<h2>Arrastra las cuentas para formar asientos que cuadren Debe = Haber</h2>

<div class="container" id="zona">
  <div class="cuentas" id="cuentas"></div>

  <table class="tabla" id="tabla">
    <thead><tr><th>Cuenta</th><th>Debe</th><th>Haber</th></tr></thead>
    <tbody></tbody>
  </table>

  <div id="panelProgreso">
    <div class="box"><h3>Puntaje</h3><p id="puntos">0 XP</p></div>
    <div class="box"><h3>Asientos Correctos</h3><p id="asientosOk">0</p></div>
    <div class="box"><h3>Nivel</h3><p id="nivel">1</p></div>
  </div>

  <button class="btn" id="verificar">‚úÖ Verificar Asiento</button>
  <p id="msg"></p>
</div>

<footer><a href="index.html" style="color:var(--accent)">‚¨Ö Volver al inicio</a></footer>

<script>
const cuentas=["Caja","Clientes","Proveedores","Banco","Inventario","Capital","Ventas","Gastos","Equipo","Publicidad"];
const divC=document.getElementById("cuentas");
const tabla=document.querySelector("#tabla tbody");
const msg=document.getElementById("msg");
const puntosEl=document.getElementById("puntos");
const nivelEl=document.getElementById("nivel");
const okEl=document.getElementById("asientosOk");

let seleccion=[], puntos=0, asientosOk=0;

// Render cuentas
cuentas.forEach(c=>{
  const d=document.createElement("div");
  d.className="cuenta";
  d.textContent=c;
  d.draggable=true;
  d.addEventListener("dragstart",e=>e.dataTransfer.setData("text/plain",c));
  divC.appendChild(d);
});

// Zona de drop
const zona=document.getElementById("zona");
zona.addEventListener("dragover",e=>e.preventDefault());
zona.addEventListener("drop",e=>{
  e.preventDefault();
  const c=e.dataTransfer.getData("text/plain");
  seleccion.push(c);
  if(seleccion.length===2){
    agregarAsiento(seleccion[0],seleccion[1]);
    seleccion=[];
  }
});

// Agregar fila
function agregarAsiento(c1,c2){
  const tr1=document.createElement("tr");
  tr1.innerHTML=`<td>${c1}</td><td>1000</td><td></td>`;
  const tr2=document.createElement("tr");
  tr2.innerHTML=`<td>${c2}</td><td></td><td>1000</td>`;
  tabla.append(tr1,tr2);
}

// Verificar
document.getElementById("verificar").onclick=()=>{
  let debe=0,haber=0;
  tabla.querySelectorAll("tr").forEach(r=>{
    debe+=+r.children[1].textContent||0;
    haber+=+r.children[2].textContent||0;
  });
  if(debe===haber && debe>0){
    msg.textContent="üéØ Correcto: Debe = Haber";
    msg.className="correcto";
    puntos+=20; asientosOk++;
    guardarXP(puntos);
  } else {
    msg.textContent="‚ùå No cuadra, revisa tus movimientos";
    msg.className="incorrecto";
    puntos=Math.max(0,puntos-5);
  }
  actualizarHUD();
};

// HUD
function actualizarHUD(){
  puntosEl.textContent=puntos+" XP";
  okEl.textContent=asientosOk;
  const lvl=Math.floor(puntos/100)+1;
  nivelEl.textContent=lvl;
}

// Guardar XP local
function guardarXP(xp){
  let data=JSON.parse(localStorage.getItem("NextSkill_XP")||"{}");
  data.diario=(data.diario||0)+xp;
  localStorage.setItem("NextSkill_XP",JSON.stringify(data));
}
</script>
</body>
</html>


